
body.book {
  
  @include mq(print) {
    font-size: $base-font-size-print;
  }
  
  .lesson {
    counter-increment: LessonNumber;
    &:before {
    }
  }
  
  .toc .lessons {
      margin-left: 0;
      padding-left: 0;
      list-style: none;

      > li {
          margin-bottom: $spacing-unit;
          a:after {
            content: leader(dotted) " " target-counter(attr(href), page);
          }
      }
  }
}

$margin-print-outer:  36pt;
$margin-print-gutter: 54pt;

@mixin margin-text() {
  @include base-style();
  text-transform: uppercase;
  font-size: $margin-font-size-print;
}

@include mq(print) {
  
  body {
    counter-reset: page 1;
  }
  
  @page { 
    size: US-Letter;
    margin: $margin-print-outer;
    padding: 0;
    
    @top-left { @include margin-text(); }
    @top-right { @include margin-text(); }
    @bottom-right { @include margin-text(); }
    @bottom-left { @include margin-text(); }
  }
  
  @page:left {
    margin-right: $margin-print-gutter;
    @top-left {
      content: string(book-title);
    }
    @bottom-left {
      content: counter(page);
    }
  }
  
  @page:right {
    margin-left: $margin-print-gutter;
    @top-right {
      content: string(lesson-title);
    }
    @bottom-right {
      content: counter(page);
    }
  }
  
  h1 > .book {
    string-set: book-title content();
  }
  
  .lesson h1 {
    string-set: lesson-title content();
  }
}
